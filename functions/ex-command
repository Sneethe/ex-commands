
local curcontext=zvm-cmd::: prompt rprompt REPLY
local -a cmd
local PROMPT RPROMPT

zstyle -s :zle:zvm-ex-command prompt prompt || prompt=':'

read-from-minibuffer "$prompt"

cmd=("${(@z)REPLY}")

# TODO: Handle:
# - '%' prefix
# - s/// command
# - ?

# for now, just try dequoting the first argument and running a widget
if [[ -n ${(Mk)widgets:#${(Q)cmd[1]}} ]]; then
	zle ${(Q)cmd} -w
fi

# vim:syntax=zsh
